<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Food Finder</title>
    <link href="styles/FoodFinder.css" rel="stylesheet">
    <script src="scripts/FoodFinder.js"></script>
    <script src="https://js.arcgis.com/4.23/"></script>
    <script>
        
        require(["esri/config","esri/Map", "esri/views/MapView", "esri/layers/FeatureLayer"], function (esriConfig, Map, MapView, FeatureLayer) {
  
            // API key
            esriConfig.apiKey = "AAPKfc20ed12bd0646ceb1528a11692825f2EtVsMSJC4_3Qkj7va_k0YVBnJD1QtAxvVvUnHkOB3rry4stBPvhVef98tMFXVUCe";
            
            // Sets up the base map
            const map = new Map({
            basemap: "arcgis-topographic"
            });
  
            //orients the focus of the map
            const view = new MapView({
              map: map,
              center: [ -111.782, 43.822], //longitude and latitude coordinates
              zoom: 16, // zoom level. Higher numbers = Higher zoom
              container: "viewDiv" 
            });

        
            //Defines a pop-up point for shuttle stops
            const popup_bus = {
                "title": "",
                "content": "<b>Location</b> {NAME}"
            }

             //Defines a pop-up point for food
            const popup_food = {
                "title": "",
                "content": "<b>Restauaunt:</b>{NAME}<br> <b>Busiest time:</b>{BUSY_PEAK}"
            }
            
            //Bus layer
            const bus_layer = new FeatureLayer({
                url: "https://services7.arcgis.com/hTwI8JKdzBOwAz2e/arcgis/rest/services/bus_markers/FeatureServer/0",
                outfields: ["NAME"],
                popupTemplate: popup_bus
            });

            //food layer
            const food_layer = new FeatureLayer({
                url: "https://services7.arcgis.com/hTwI8JKdzBOwAz2e/arcgis/rest/services/food_markers/FeatureServer/0",
                outfields: ["NAME","BUSY_PEAK"],
                popupTemplate: popup_food
            });

            //add layers

            map.add(bus_layer, 0)
            map.add(food_layer, 1)

            
  
        });
      </script>
    
</head>
<body>
    <div id="viewDiv"> </div>
    
</body>

</html>